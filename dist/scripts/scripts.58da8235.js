"use strict";angular.module("tmdapitestApp",["ngMaterial","ngSanitize","config","angular-carousel","ngRoute"]).config(["$routeProvider",function(a){a.when("/:id/:name",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"ctrl"}).when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"ctrl"}).otherwise({redirectTo:"/"})}]),angular.module("config",[]).constant("API",{url:"http://159.203.66.105"}),angular.module("tmdapitestApp").controller("MainCtrl",["$scope","$http","$mdDialog","$mdSidenav","$routeParams","$location","MoviesService",function(a,b,c,d,e,f,g){a.actor={selected2:void 0,selected:void 0},a.actorExtended=void 0,a.actorList=[],a.movies=[],a.loadingMovies=!1,a.loadingActor=!1,a.openSide=!1,a.openActor=function(a){a&&setTimeout(function(){f.path("/"+a.id+"/"+a.name)},100)},a.refreshActors=function(b){return a.actorList=[],""!==b?g.searchActors(b).then(function(b){return a.loadingMovies=!1,b.data.success?a.actorList=b.data.results:a.actorList=[],a.actorList}):a.actorList},a.refreshActorInfo=function(){return a.actorExtended=void 0,a.actor.selected2?(a.loadingActor=!0,g.getActorInfo(a.actor.selected2.id).then(function(b){a.loadingActor=!1,a.actorExtended=b.data.results})):void 0},a.refreshMovies=function(){return a.movies=[],a.actor.selected2?(a.loadingMovies=!0,g.getMovies(a.actor.selected2.id).then(function(b){a.loadingMovies=!1,a.movies=b.data.results})):void 0},a.openMovie=function(b,d){c.show({controller:"MovieCtrl as ctrl",templateUrl:"views/movie.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,locals:{movieSelected:d,actorSelected:a.actor.selected2},bindToController:!0}).then(function(b){b&&a.openActor(b)})},a.toggleActorSidebar=function(){a.openSide=!a.openSide},a.getMovieImage=function(a){return a?"http://image.tmdb.org/t/p/w185"+a:"http://dummyimage.com/185x278/555/fff.png&text=No+image"},e.id&&(a.actor.selected2={id:e.id,name:e.name},a.actor.selected=a.actor.selected2,a.refreshMovies(),a.refreshActorInfo())}]),angular.module("tmdapitestApp").service("MoviesService",["$http","API",function(a,b){function c(c){var d={actor:c},e=b.url+"/actor.php";return a.get(e,{params:d})}function d(c){var d={q:c},e=b.url+"/searchActor.php";return a.get(e,{params:d})}function e(c){var d={movie:c},e=b.url+"/movie.php";return a.get(e,{params:d})}function f(c){var d={actor:c},e=b.url+"/movies.php";return a.get(e,{params:d})}return{searchActors:d,getActorInfo:c,getMovies:f,getMovieInfo:e}}]),angular.module("tmdapitestApp").controller("MovieCtrl",["$scope","$mdDialog","$sce","MoviesService","movieSelected","actorSelected",function(a,b,c,d,e,f){a.movieSelected=e,a.movieExtended=void 0,a.movieImages=[],a.movieTrailer=void 0,a.actorSelected=f,a.exdended=!1,d.getMovieInfo(a.movieSelected.id).then(function(b){b.data.success&&(a.exdended=!0,a.movieExtended=b.data.results,a.movieImages=a.movieExtended.images.posters.concat(a.movieExtended.images.backdrops),a.hasVideo()&&(a.movieTrailer=a.movieExtended.videos.results[0]))}),a.hide=function(){b.hide(!1)},a.openActor=function(a){b.hide(a)},a.hasImages=function(){return a.movieExtended?a.movieImages.length>0:!1},a.hasVideo=function(){return a.movieExtended?a.movieExtended.videos.results.length>0:!1},a.getIframeSrc=function(a){return c.trustAsResourceUrl("https://www.youtube.com/embed/"+a)}}]);