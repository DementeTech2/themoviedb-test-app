"use strict";angular.module("tmdapitestApp",["ngMaterial","ngSanitize","config","angular-carousel"]),angular.module("config",[]).constant("API",{url:"http://159.203.66.105"}),angular.module("tmdapitestApp").controller("MainCtrl",["$scope","$http","$mdDialog","$mdSidenav","MoviesService",function(a,b,c,d,e){a.actor={selected:void 0},a.actorExtended=void 0,a.actorList=[],a.movies=[],a.loadingMovies=!1,a.loadingActor=!1,a.openSide=!1,a.refreshActors=function(b){return a.actorList=[],""!==b?e.searchActors(b).then(function(b){return a.loadingMovies=!1,b.data.success?a.actorList=b.data.results:a.actorList=[],a.actorList}):a.actorList},a.refreshActorInfo=function(){return a.actorExtended=void 0,a.actor.selected?(a.loadingActor=!0,e.getActorInfo(a.actor.selected.id).then(function(b){a.loadingActor=!1,a.actorExtended=b.data.results})):void 0},a.refreshMovies=function(){return a.refreshActorInfo(),a.movies=[],a.actor.selected?(a.loadingMovies=!0,e.getMovies(a.actor.selected.id).then(function(b){a.loadingMovies=!1,a.movies=b.data.results})):void 0},a.openMovie=function(b,d){c.show({controller:"MovieCtrl as ctrl",templateUrl:"views/movie.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,locals:{movieSelected:d,actorSelected:a.actor.selected},bindToController:!0}).then(function(b){b&&(a.actor.selected=b,a.refreshMovies())})},a.toggleActorSidebar=function(){a.openSide=!a.openSide}}]),angular.module("tmdapitestApp").service("MoviesService",["$http","API",function(a,b){function c(c){var d={actor:c},e=b.url+"/actor.php";return a.get(e,{params:d})}function d(c){var d={q:c},e=b.url+"/searchActor.php";return a.get(e,{params:d})}function e(c){var d={movie:c},e=b.url+"/movie.php";return a.get(e,{params:d})}function f(c){var d={actor:c},e=b.url+"/movies.php";return a.get(e,{params:d})}return{searchActors:d,getActorInfo:c,getMovies:f,getMovieInfo:e}}]),angular.module("tmdapitestApp").controller("MovieCtrl",["$scope","$mdDialog","$sce","MoviesService","movieSelected","actorSelected",function(a,b,c,d,e,f){a.movieSelected=e,a.movieExtended=void 0,a.movieImages=[],a.movieTrailer=void 0,a.actorSelected=f,a.exdended=!1,d.getMovieInfo(a.movieSelected.id).then(function(b){b.data.success&&(a.exdended=!0,a.movieExtended=b.data.results,a.movieImages=a.movieExtended.images.posters.concat(a.movieExtended.images.backdrops),a.hasVideo()&&(a.movieTrailer=a.movieExtended.videos.results[0]))}),a.hide=function(){b.hide(!1)},a.openActor=function(a){b.hide(a)},a.hasImages=function(){return a.movieExtended?a.movieImages.length>0:!1},a.hasVideo=function(){return a.movieExtended?a.movieExtended.videos.results.length>0:!1},a.getIframeSrc=function(a){return c.trustAsResourceUrl("https://www.youtube.com/embed/"+a)}}]);